{% extends 'base.html' %}
{% load static %}

{% block content %}
{% if user.is_authenticated %}
<div>
    <h1>{{event_slot.tutorial.title}}</h1>
    <div>
        <p>{{event_slot.tutorial.excerpt}}</p>
        <p>{{event_slot.tutorial_date}}</p>
        <p>{{event_slot.start_time}} to {{event_slot.end_time}}</p>
        {% if user.is_authenticated %}
            {% if is_booked %}
                <p>This tutorial is already booked. Please see other available times.</p>
                <a href="{url 'calendar'}">Return to Book Tutorial page.</a>
            {% else %}
                <button type="button" id="bookButton">Book this tutorial</button>
            {% endif %}
        {% endif %}
    </div>
</div>
{% endif %}

<!-- Booking prompt Modal starts here -->
{% if not is_booked %}
<form action="" method="POST">
    <div class="modal" tabindex="-1" id="bookingModal" aria-labelledby="bookingModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="bookingModalLabel">{{event_slot.tutorial.title}}</h5>
                </div>
                <div class="modal-body">
                    <p>Ready to book your tutorial with {{event_slot.tutorial.tutor_name}}? </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Book Tutorial</button>
                </div>
            </div>
        </div>
    </div>
</form>
{% endif %}
<!-- Booking prompt Modal ends here -->
{% endblock %}